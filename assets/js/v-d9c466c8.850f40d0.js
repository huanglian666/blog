"use strict";(self.webpackChunkhuanglian=self.webpackChunkhuanglian||[]).push([[4418],{32265:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-d9c466c8",path:"/sql/mysql/06_%E7%BA%A6%E6%9D%9F.html",title:"",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"一、是什么",slug:"一、是什么",children:[]},{level:2,title:"二、实体完整性约束",slug:"二、实体完整性约束",children:[{level:3,title:"2.1、主键约束",slug:"_2-1、主键约束",children:[]},{level:3,title:"2.2、主键自增长",slug:"_2-2、主键自增长",children:[]},{level:3,title:"2.3、唯一约束",slug:"_2-3、唯一约束",children:[]}]},{level:2,title:"三、域完整性约束",slug:"三、域完整性约束",children:[{level:3,title:"3.1、非空约束",slug:"_3-1、非空约束",children:[]},{level:3,title:"3.2、默认值",slug:"_3-2、默认值",children:[]}]},{level:2,title:"四、引用完整性约束",slug:"四、引用完整性约束",children:[]}],filePathRelative:"sql/mysql/06_约束.md",git:{updatedTime:1661237516e3,contributors:[{name:"黄健",email:"huang.jian@trs.com.cn",commits:1}]}}},93280:(n,s,a)=>{a.r(s),a.d(s,{default:()=>l});const e=(0,a(66252).uE)('<h2 id="一、是什么" tabindex="-1"><a class="header-anchor" href="#一、是什么" aria-hidden="true">#</a> 一、是什么</h2><blockquote><p>用于限制加入表的数据的类型和规范，约束是添加在列上的，<strong>用来约束列的</strong>。</p><p>分类：</p><ul><li>实体完整性约束；</li><li>域完整性约束；</li><li>引用完整性约束。</li></ul></blockquote><h2 id="二、实体完整性约束" tabindex="-1"><a class="header-anchor" href="#二、实体完整性约束" aria-hidden="true">#</a> 二、实体完整性约束</h2><h3 id="_2-1、主键约束" tabindex="-1"><a class="header-anchor" href="#_2-1、主键约束" aria-hidden="true">#</a> 2.1、主键约束</h3><blockquote><p>标识表中的一行数据，是该行数据的唯一标识，特性：</p><ul><li>非空；</li><li>唯一；</li><li>被引用（在外键中使用）。</li></ul><p>当表的某一列被指定为主键后，该列就不能为空，不能有重复值出现。</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建表时指定主键</span>\n<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>\n    列名 数据类型 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>\n\t列名 数据类型<span class="token punctuation">,</span>\n\t列名 数据类型\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment"># 创建表时指定主键</span>\n<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>\n    列名 数据类型<span class="token punctuation">,</span>\n\t列名 数据类型<span class="token punctuation">,</span>\n\t列名 数据类型<span class="token punctuation">,</span>\n    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>设置为主键的列名<span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment"># 修改表时指定主键</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>列名<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 列名 列类型 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 CHANGE 原列名 新列名 列类型 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span>\n\n<span class="token comment"># 删除主键</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_2-2、主键自增长" tabindex="-1"><a class="header-anchor" href="#_2-2、主键自增长" aria-hidden="true">#</a> 2.2、主键自增长</h3><blockquote><p>通常<strong>指定主键类为整型</strong>，然后设置其自动增长，这样可以保证在插入数据时主键列的唯一和非空特性 。</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建表时指定主键</span>\n<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>\n    列名 数据类型 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>\n\t列名 数据类型<span class="token punctuation">,</span>\n\t列名 数据类型\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment"># 修改表时设置主键自增长</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 CHANGE 原列名 新列名 列类型 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">;</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 列名 列类型 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">;</span>\n\n<span class="token comment"># 修改表时删除主键自增长</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 CHANGE 原列名 新列名 列类型<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_2-3、唯一约束" tabindex="-1"><a class="header-anchor" href="#_2-3、唯一约束" aria-hidden="true">#</a> 2.3、唯一约束</h3><blockquote><p>某些列不能设置重复的值，所以可以对列添加唯一约束。</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建表时指定唯一约束</span>\n<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>\n    列名 数据类型 <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>\n\t列名 数据类型<span class="token punctuation">,</span>\n\t列名 数据类型\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment"># 修改表时设置唯一约束</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 列名 列类型 <span class="token keyword">UNIQUE</span><span class="token punctuation">;</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 CHANGE 原列名 新列名 列类型 <span class="token keyword">UNIQUE</span><span class="token punctuation">;</span>\n\n<span class="token comment"># 删除唯一约束</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> name<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="三、域完整性约束" tabindex="-1"><a class="header-anchor" href="#三、域完整性约束" aria-hidden="true">#</a> 三、域完整性约束</h2><h3 id="_3-1、非空约束" tabindex="-1"><a class="header-anchor" href="#_3-1、非空约束" aria-hidden="true">#</a> 3.1、非空约束</h3><blockquote><p>此列必须有值，某些列不能设置为NULL值</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建表时指定非空约束</span>\n<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>\n    列名 数据类型 <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n\t列名 数据类型<span class="token punctuation">,</span>\n\t列名 数据类型\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment"># 修改表时设置非空约束</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 列名 列类型 <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 CHANGE 原列名 新列名 列类型 <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>\n\n<span class="token comment"># 删除非空约束</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 列名 列类型<span class="token punctuation">;</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 CHANGE 原列名 新列名 列类型<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_3-2、默认值" tabindex="-1"><a class="header-anchor" href="#_3-2、默认值" aria-hidden="true">#</a> 3.2、默认值</h3><blockquote><p>为列赋予默认值，当新增数据不指定值时，书写DEFAULT，以指定的默认值进行填充。</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建表时指定默认值</span>\n<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>\n    列名 数据类型 <span class="token keyword">DEFAULT</span> 默认值<span class="token punctuation">,</span>\n\t列名 数据类型<span class="token punctuation">,</span>\n\t列名 数据类型\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment"># 修改表时设置默认值</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 列名 列类型 <span class="token keyword">DEFAULT</span> 默认值<span class="token punctuation">;</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 CHANGE 原列名 新列名 列类型 <span class="token keyword">DEFAULT</span> 默认值<span class="token punctuation">;</span>\n\n<span class="token comment"># 删除默认值</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 列名 列类型<span class="token punctuation">;</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 CHANGE 原列名 新列名 列类型<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="四、引用完整性约束" tabindex="-1"><a class="header-anchor" href="#四、引用完整性约束" aria-hidden="true">#</a> 四、引用完整性约束</h2><blockquote><p>这里说的引用完整性约束就是指的<strong>外键约束</strong>，作用：</p><ul><li>引用外部表的某个列的值；</li><li>新增数据时，约束此列的值必须是引用表中已经存在的值。</li></ul><p>外键的特点：</p><ul><li>外键必须是<strong>另一表的主键</strong>的值(外键要引用主键！)；</li><li>外键可以重复；</li><li>外键可以为空；</li><li>一张表中可以有多个外键。</li></ul></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建表时指定外键约束</span>\n<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>\n    列名 数据类型<span class="token punctuation">,</span>\n\t列名 数据类型<span class="token punctuation">,</span>\n\t列名 数据类型<span class="token punctuation">,</span>\n    <span class="token keyword">CONSTRAINT</span> 约束名称 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>外键列名<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> 关联表<span class="token punctuation">(</span>关联表的主键<span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment"># 修改表时添加外键约束</span>\nALERT <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> 约束名称 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>外键列名<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> 关联表<span class="token punctuation">(</span>关联表的主键<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment"># 修改表时删除外键约束</span>\n<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> 约束名称<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div>',22),p={},l=(0,a(83744).Z)(p,[["render",function(n,s){return e}]])}}]);